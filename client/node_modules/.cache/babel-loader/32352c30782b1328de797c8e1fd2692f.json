{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { ChatsContext } from \"../../../contexts/ChatsProvider\";\nimport { UserContext } from \"../../../contexts/UserProvider\";\nexport const useSendMessage = async _ref => {\n  _s();\n\n  let {\n    messageInput,\n    setMessageInput\n  } = _ref;\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    chats\n  } = useContext(ChatsContext);\n  const currentChatParamsId = useParams().chatId;\n  if (messageInput === \"\" || !user) return;\n  const res = await axios.post(`http://localhost:5050/api/messages/${currentChatParamsId}`, {\n    content: messageInput,\n    userId: user._id,\n    chatId: currentChatParamsId\n  });\n  const chatsCopy = [...chats];\n  const currentChat = chatsCopy.find(chat => chat._id === currentChatParamsId);\n  if (!currentChat) return;\n  const membersIds = currentChat.membersInfos.map(member => member._id);\n  const receiversIds = membersIds.filter(id => id !== user._id);\n  const {\n    userId,\n    ...others\n  } = res.data;\n  const messageCopy = { ...others,\n    userInfos: user\n  }; // emitNewMessageSocket(messageCopy, receiversIds);\n  // updateCurrentChatLastMessage(messageCopy, currentChat, chatsCopy);\n  // setMessages([messageCopy, ...messages]);\n\n  setMessageInput(\"\");\n  return true;\n};\n\n_s(useSendMessage, \"NWYnce9rAfp6u7s2WXd6bMvlhKI=\", false, function () {\n  return [useParams];\n});","map":{"version":3,"sources":["/Users/stan/Desktop/messenger/client/src/components/chat/chatInput/sendMessage.tsx"],"names":["axios","useContext","useParams","ChatsContext","UserContext","useSendMessage","messageInput","setMessageInput","user","chats","currentChatParamsId","chatId","res","post","content","userId","_id","chatsCopy","currentChat","find","chat","membersIds","membersInfos","map","member","receiversIds","filter","id","others","data","messageCopy","userInfos"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,YAAT,QAA6B,iCAA7B;AACA,SAASC,WAAT,QAA4B,gCAA5B;AAEA,OAAO,MAAMC,cAAc,GAAG,cAMxB;AAAA;;AAAA,MAN+B;AACnCC,IAAAA,YADmC;AAEnCC,IAAAA;AAFmC,GAM/B;AACJ,QAAM;AAAEC,IAAAA;AAAF,MAAWP,UAAU,CAACG,WAAD,CAA3B;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAYR,UAAU,CAACE,YAAD,CAA5B;AACA,QAAMO,mBAAmB,GAAGR,SAAS,GAAGS,MAAxC;AAEA,MAAIL,YAAY,KAAK,EAAjB,IAAuB,CAACE,IAA5B,EAAkC;AAClC,QAAMI,GAAG,GAAG,MAAMZ,KAAK,CAACa,IAAN,CACf,sCAAqCH,mBAAoB,EAD1C,EAEhB;AACEI,IAAAA,OAAO,EAAER,YADX;AAEES,IAAAA,MAAM,EAAEP,IAAI,CAACQ,GAFf;AAGEL,IAAAA,MAAM,EAAED;AAHV,GAFgB,CAAlB;AAQA,QAAMO,SAAS,GAAG,CAAC,GAAGR,KAAJ,CAAlB;AACA,QAAMS,WAAW,GAAGD,SAAS,CAACE,IAAV,CACjBC,IAAD,IAAUA,IAAI,CAACJ,GAAL,KAAaN,mBADL,CAApB;AAGA,MAAI,CAACQ,WAAL,EAAkB;AAClB,QAAMG,UAAU,GAAGH,WAAW,CAACI,YAAZ,CAAyBC,GAAzB,CAA8BC,MAAD,IAAYA,MAAM,CAACR,GAAhD,CAAnB;AACA,QAAMS,YAAY,GAAGJ,UAAU,CAACK,MAAX,CAAmBC,EAAD,IAAQA,EAAE,KAAKnB,IAAI,CAACQ,GAAtC,CAArB;AACA,QAAM;AAAED,IAAAA,MAAF;AAAU,OAAGa;AAAb,MAAwBhB,GAAG,CAACiB,IAAlC;AACA,QAAMC,WAAW,GAAG,EAClB,GAAGF,MADe;AAElBG,IAAAA,SAAS,EAAEvB;AAFO,GAApB,CAtBI,CA0BJ;AACA;AACA;;AACAD,EAAAA,eAAe,CAAC,EAAD,CAAf;AACA,SAAO,IAAP;AACD,CArCM;;GAAMF,c;UASiBH,S","sourcesContent":["import axios from \"axios\";\nimport { useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { ChatsContext } from \"../../../contexts/ChatsProvider\";\nimport { UserContext } from \"../../../contexts/UserProvider\";\n\nexport const useSendMessage = async ({\n  messageInput,\n  setMessageInput,\n}: {\n  messageInput: string;\n  setMessageInput: React.Dispatch<React.SetStateAction<string>>;\n}) => {\n  const { user } = useContext(UserContext);\n  const { chats } = useContext(ChatsContext);\n  const currentChatParamsId = useParams().chatId;\n\n  if (messageInput === \"\" || !user) return;\n  const res = await axios.post(\n    `http://localhost:5050/api/messages/${currentChatParamsId}`,\n    {\n      content: messageInput,\n      userId: user._id,\n      chatId: currentChatParamsId,\n    }\n  );\n  const chatsCopy = [...chats];\n  const currentChat = chatsCopy.find(\n    (chat) => chat._id === currentChatParamsId\n  );\n  if (!currentChat) return;\n  const membersIds = currentChat.membersInfos.map((member) => member._id);\n  const receiversIds = membersIds.filter((id) => id !== user._id);\n  const { userId, ...others } = res.data;\n  const messageCopy = {\n    ...others,\n    userInfos: user,\n  };\n  // emitNewMessageSocket(messageCopy, receiversIds);\n  // updateCurrentChatLastMessage(messageCopy, currentChat, chatsCopy);\n  // setMessages([messageCopy, ...messages]);\n  setMessageInput(\"\");\n  return true;\n};\n"]},"metadata":{},"sourceType":"module"}