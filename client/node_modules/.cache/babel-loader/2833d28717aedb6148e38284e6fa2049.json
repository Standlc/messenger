{"ast":null,"code":"import { DateTime } from \"luxon\";\nexport const groupChatMessage = _ref => {\n  let {\n    messages,\n    i,\n    messageRef,\n    isOwnMessage\n  } = _ref;\n  const message = messages[i];\n  const messageAbove = messages[i + 1];\n  const messageBelow = messages[i - 1];\n  const messageRefCurrent = messageRef.current;\n  if (!messageRefCurrent) return;\n\n  const surroundedStyle = () => {\n    return isOwnMessage ? (messageRefCurrent.style.borderTopRightRadius = \"5px\", messageRefCurrent.style.borderBottomRightRadius = \"5px\") : (messageRefCurrent.style.borderTopLeftRadius = \"5px\", messageRefCurrent.style.borderBottomLeftRadius = \"5px\");\n  };\n\n  const borderBottomStyle = () => {\n    return isOwnMessage ? messageRefCurrent.style.borderBottomRightRadius = \"5px\" : messageRefCurrent.style.borderBottomLeftRadius = \"5px\";\n  };\n\n  const borderTopStyle = () => {\n    return isOwnMessage ? messageRefCurrent.style.borderTopRightRadius = \"5px\" : messageRefCurrent.style.borderTopLeftRadius = \"5px\";\n  };\n\n  const assigningStyles = () => {\n    if (hasNeighborAbove({\n      message,\n      messageAbove\n    }) && hasNeighborBelow({\n      message,\n      messageBelow\n    })) surroundedStyle();\n    if (hasNeighborAbove({\n      message,\n      messageAbove\n    }) && !hasNeighborBelow({\n      message,\n      messageBelow\n    })) borderTopStyle();\n    if (!hasNeighborAbove({\n      message,\n      messageAbove\n    }) && hasNeighborBelow({\n      message,\n      messageBelow\n    })) borderBottomStyle();\n  };\n\n  assigningStyles();\n};\nexport const time = (messageCreatedAt, dateType) => {\n  const Date = DateTime.fromISO(messageCreatedAt);\n  const timeTable = {\n    year: Date.toLocaleString({\n      year: \"2-digit\"\n    }),\n    month: Date.toLocaleString({\n      month: \"2-digit\"\n    }),\n    day: Date.toLocaleString({\n      day: \"2-digit\"\n    }),\n    hour: Date.toLocaleString({\n      hour: \"2-digit\",\n      hourCycle: \"h23\"\n    })\n  };\n  const isValidDateType = dateType === \"year\" || dateType === \"month\" || dateType === \"day\" || dateType === \"hour\";\n  return parseInt(timeTable[isValidDateType ? dateType : \"hour\"]);\n};\nexport const hasNeighborBelow = _ref2 => {\n  let {\n    message,\n    messageBelow\n  } = _ref2;\n  if (!messageBelow || messageBelow.userInfos._id !== message.userInfos._id) return false;\n  const messageBelowDate = messageBelow.createdAt;\n  const messageDate = message.createdAt;\n  if (time(messageDate, \"year\") < time(messageBelowDate, \"year\")) return;\n  if (time(messageDate, \"month\") < time(messageBelowDate, \"month\")) return;\n  if (time(messageDate, \"day\") < time(messageBelowDate, \"day\")) return;\n  return !(time(messageDate, \"hour\") < time(messageBelowDate, \"hour\"));\n};\nexport const hasNeighborAbove = _ref3 => {\n  let {\n    message,\n    messageAbove,\n    groupAll\n  } = _ref3;\n  if (!messageAbove || !groupAll && messageAbove.userInfos._id !== message.userInfos._id) return false;\n  const messageAboveDate = messageAbove.createdAt;\n  const messageDate = message.createdAt;\n  if (time(messageDate, \"year\") > time(messageAboveDate, \"year\")) return;\n  if (time(messageDate, \"month\") > time(messageAboveDate, \"month\")) return;\n  if (time(messageDate, \"day\") > time(messageAboveDate, \"day\")) return;\n  return !(time(messageDate, \"hour\") > time(messageAboveDate, \"hour\"));\n};","map":{"version":3,"sources":["/Users/stan/Desktop/messenger/client/src/components/chat/messagesList/chatMessage/groupeChatMessage.tsx"],"names":["DateTime","groupChatMessage","messages","i","messageRef","isOwnMessage","message","messageAbove","messageBelow","messageRefCurrent","current","surroundedStyle","style","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","borderBottomStyle","borderTopStyle","assigningStyles","hasNeighborAbove","hasNeighborBelow","time","messageCreatedAt","dateType","Date","fromISO","timeTable","year","toLocaleString","month","day","hour","hourCycle","isValidDateType","parseInt","userInfos","_id","messageBelowDate","createdAt","messageDate","groupAll","messageAboveDate"],"mappings":"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","sourcesContent":["import { Message } from \"../../../../types\";\nimport { DateTime } from \"luxon\";\nimport { RefObject } from \"react\";\n\nexport const groupChatMessage = ({\n  messages,\n  i,\n  messageRef,\n  isOwnMessage,\n}: {\n  messages: Message[];\n  i: number;\n  messageRef: RefObject<HTMLDivElement>;\n  isOwnMessage: boolean;\n}) => {\n  const message = messages[i];\n  const messageAbove = messages[i + 1];\n  const messageBelow = messages[i - 1];\n  const messageRefCurrent = messageRef.current;\n  if (!messageRefCurrent) return;\n\n  const surroundedStyle = () => {\n    return isOwnMessage\n      ? ((messageRefCurrent.style.borderTopRightRadius = \"5px\"),\n        (messageRefCurrent.style.borderBottomRightRadius = \"5px\"))\n      : ((messageRefCurrent.style.borderTopLeftRadius = \"5px\"),\n        (messageRefCurrent.style.borderBottomLeftRadius = \"5px\"));\n  };\n  const borderBottomStyle = () => {\n    return isOwnMessage\n      ? (messageRefCurrent.style.borderBottomRightRadius = \"5px\")\n      : (messageRefCurrent.style.borderBottomLeftRadius = \"5px\");\n  };\n  const borderTopStyle = () => {\n    return isOwnMessage\n      ? (messageRefCurrent.style.borderTopRightRadius = \"5px\")\n      : (messageRefCurrent.style.borderTopLeftRadius = \"5px\");\n  };\n\n  const assigningStyles = () => {\n    if (\n      hasNeighborAbove({ message, messageAbove }) &&\n      hasNeighborBelow({ message, messageBelow })\n    )\n      surroundedStyle();\n    if (\n      hasNeighborAbove({ message, messageAbove }) &&\n      !hasNeighborBelow({ message, messageBelow })\n    )\n      borderTopStyle();\n    if (\n      !hasNeighborAbove({ message, messageAbove }) &&\n      hasNeighborBelow({ message, messageBelow })\n    )\n      borderBottomStyle();\n  };\n  assigningStyles();\n};\n\nexport const time = (messageCreatedAt: string, dateType: string) => {\n  const Date = DateTime.fromISO(messageCreatedAt);\n  const timeTable = {\n    year: Date.toLocaleString({\n      year: \"2-digit\",\n    }),\n    month: Date.toLocaleString({\n      month: \"2-digit\",\n    }),\n    day: Date.toLocaleString({\n      day: \"2-digit\",\n    }),\n    hour: Date.toLocaleString({\n      hour: \"2-digit\",\n      hourCycle: \"h23\",\n    }),\n  };\n  const isValidDateType =\n    dateType === \"year\" ||\n    dateType === \"month\" ||\n    dateType === \"day\" ||\n    dateType === \"hour\";\n\n  return parseInt(timeTable[isValidDateType ? dateType : \"hour\"]);\n};\n\nexport const hasNeighborBelow = ({\n  message,\n  messageBelow,\n}: {\n  message: Message;\n  messageBelow: Message;\n}) => {\n  if (!messageBelow || messageBelow.userInfos._id !== message.userInfos._id)\n    return false;\n  const messageBelowDate = messageBelow.createdAt;\n  const messageDate = message.createdAt;\n\n  if (time(messageDate, \"year\") < time(messageBelowDate, \"year\")) return;\n  if (time(messageDate, \"month\") < time(messageBelowDate, \"month\")) return;\n  if (time(messageDate, \"day\") < time(messageBelowDate, \"day\")) return;\n  return !(time(messageDate, \"hour\") < time(messageBelowDate, \"hour\"));\n};\n\nexport const hasNeighborAbove = ({\n  message,\n  messageAbove,\n  groupAll,\n}: {\n  message: Message;\n  messageAbove: Message;\n  groupAll?: boolean;\n}) => {\n  if (\n    !messageAbove ||\n    (!groupAll && messageAbove.userInfos._id !== message.userInfos._id)\n  )\n    return false;\n\n  const messageAboveDate = messageAbove.createdAt;\n  const messageDate = message.createdAt;\n\n  if (time(messageDate, \"year\") > time(messageAboveDate, \"year\")) return;\n  if (time(messageDate, \"month\") > time(messageAboveDate, \"month\")) return;\n  if (time(messageDate, \"day\") > time(messageAboveDate, \"day\")) return;\n  return !(time(messageDate, \"hour\") > time(messageAboveDate, \"hour\"));\n};\n"]},"metadata":{},"sourceType":"module"}