{"ast":null,"code":"var _jsxFileName = \"/Users/stan/Desktop/messenger/client/src/components/chat/messagesList/chatMessage/ChatMessage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { UserContext } from \"../../../../contexts/UserProvider\";\nimport { groupChatMessage } from \"./isMessageClose\";\nimport \"./chatMessage.css\";\nimport { scrollIntoView } from \"./scrollIntoView\";\nimport ChatDate from \"./chatTime/ChatDate\";\nimport { chatMessageDateFormat } from \"./chatMessageDateFormat\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChatMessage = _ref => {\n  _s();\n\n  let {\n    messages,\n    i\n  } = _ref;\n  const {\n    user\n  } = useContext(UserContext);\n  const isOwnMessage = (user === null || user === void 0 ? void 0 : user._id) === messages[i].userInfos._id;\n  const messageRef = useRef(null); //HOVER MESSAGE\n\n  const [mouseOverTimeOut, setMouseOverTimeOut] = useState();\n  const [isMouseHovering, setIsMouseHovering] = useState(false);\n\n  const handleMouseHoveringMessage = () => {\n    setMouseOverTimeOut(setTimeout(() => {\n      setIsMouseHovering(true);\n    }, 500));\n  };\n\n  const handleMouseLeaving = () => {\n    if (mouseOverTimeOut) clearTimeout(mouseOverTimeOut);\n    setIsMouseHovering(false);\n  }; // const hasNeighborBelow = hasCloseNeighbor({\n  //   order: \"next\",\n  //   messages,\n  //   i,\n  // });\n  // const hasNeighborAbove = hasCloseNeighbor({\n  //   order: \"prev\",\n  //   messages,\n  //   i,\n  // });\n  // const chatMessageClassName = () => {\n  //   if (isOwnMessage) {\n  //     if (hasNeighborBelow && hasNeighborAbove)\n  //       return \"chat-message own-up-down\";\n  //     else if (hasNeighborBelow && !hasNeighborAbove)\n  //       return \"chat-message own-down\";\n  //     else if (!hasNeighborBelow && hasNeighborAbove)\n  //       return \"chat-message own-up\";\n  //     else return \"chat-message own\";\n  //   } else {\n  //     if (hasNeighborBelow && hasNeighborAbove) return \"chat-message up-down\";\n  //     else if (hasNeighborBelow && !hasNeighborAbove)\n  //       return \"chat-message down\";\n  //     else if (!hasNeighborBelow && hasNeighborAbove) return \"chat-message up\";\n  //     else return \"chat-message\";\n  //   }\n  // };\n\n\n  useEffect(() => {\n    groupChatMessage({\n      messages,\n      i,\n      messageRef\n    });\n  }, [messages, i, messageRef]);\n\n  const chatMessageClassName = () => {\n    if (isOwnMessage) return \"chat-message own\";else return \"chat-message\";\n  };\n\n  useEffect(() => {\n    scrollIntoView({\n      messageRef,\n      messages,\n      i\n    });\n  }, [messageRef, messages, i]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: isOwnMessage ? \"chat-message-wrapper own\" : \"chat-message-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(ChatDate, {\n      messages: messages,\n      i: i\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: isOwnMessage ? \"chat-message-text-PP own\" : \"chat-message-text-PP\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        onMouseEnter: handleMouseHoveringMessage,\n        onMouseLeave: handleMouseLeaving,\n        ref: messageRef,\n        className: chatMessageClassName(),\n        children: [messages[i].content, isMouseHovering && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: isOwnMessage ? \"chat-message-date-small own\" : \"chat-message-date-small\",\n          children: chatMessageDateFormat({\n            messages,\n            i\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ChatMessage, \"PvdrB/jeEpbt987kU9MYzMKtHco=\");\n\n_c = ChatMessage;\nexport default ChatMessage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatMessage\");","map":{"version":3,"sources":["/Users/stan/Desktop/messenger/client/src/components/chat/messagesList/chatMessage/ChatMessage.tsx"],"names":["React","useContext","useEffect","useRef","useState","UserContext","groupChatMessage","scrollIntoView","ChatDate","chatMessageDateFormat","ChatMessage","messages","i","user","isOwnMessage","_id","userInfos","messageRef","mouseOverTimeOut","setMouseOverTimeOut","isMouseHovering","setIsMouseHovering","handleMouseHoveringMessage","setTimeout","handleMouseLeaving","clearTimeout","chatMessageClassName","content"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { Message } from \"../../../../types\";\nimport { UserContext } from \"../../../../contexts/UserProvider\";\nimport { groupChatMessage } from \"./isMessageClose\";\nimport \"./chatMessage.css\";\nimport { scrollIntoView } from \"./scrollIntoView\";\nimport ProfilePicture from \"../../../profilePicture/ProfilePicture\";\nimport ChatDate from \"./chatTime/ChatDate\";\nimport { chatMessageDateFormat } from \"./chatMessageDateFormat\";\n\nconst ChatMessage = ({ messages, i }: { messages: Message[]; i: number }) => {\n  const { user } = useContext(UserContext);\n  const isOwnMessage = user?._id === messages[i].userInfos._id;\n  const messageRef = useRef<HTMLDivElement>(null);\n\n  //HOVER MESSAGE\n  const [mouseOverTimeOut, setMouseOverTimeOut] = useState<NodeJS.Timeout>();\n  const [isMouseHovering, setIsMouseHovering] = useState(false);\n  const handleMouseHoveringMessage = () => {\n    setMouseOverTimeOut(\n      setTimeout(() => {\n        setIsMouseHovering(true);\n      }, 500)\n    );\n  };\n  const handleMouseLeaving = () => {\n    if (mouseOverTimeOut) clearTimeout(mouseOverTimeOut);\n    setIsMouseHovering(false);\n  };\n\n  // const hasNeighborBelow = hasCloseNeighbor({\n  //   order: \"next\",\n  //   messages,\n  //   i,\n  // });\n  // const hasNeighborAbove = hasCloseNeighbor({\n  //   order: \"prev\",\n  //   messages,\n  //   i,\n  // });\n\n  // const chatMessageClassName = () => {\n  //   if (isOwnMessage) {\n  //     if (hasNeighborBelow && hasNeighborAbove)\n  //       return \"chat-message own-up-down\";\n  //     else if (hasNeighborBelow && !hasNeighborAbove)\n  //       return \"chat-message own-down\";\n  //     else if (!hasNeighborBelow && hasNeighborAbove)\n  //       return \"chat-message own-up\";\n  //     else return \"chat-message own\";\n  //   } else {\n  //     if (hasNeighborBelow && hasNeighborAbove) return \"chat-message up-down\";\n  //     else if (hasNeighborBelow && !hasNeighborAbove)\n  //       return \"chat-message down\";\n  //     else if (!hasNeighborBelow && hasNeighborAbove) return \"chat-message up\";\n  //     else return \"chat-message\";\n  //   }\n  // };\n  useEffect(() => {\n    groupChatMessage({ messages, i, messageRef });\n  }, [messages, i, messageRef]);\n\n  const chatMessageClassName = () => {\n    if (isOwnMessage) return \"chat-message own\";\n    else return \"chat-message\";\n  };\n\n  useEffect(() => {\n    scrollIntoView({ messageRef, messages, i });\n  }, [messageRef, messages, i]);\n\n  return (\n    <div\n      className={\n        isOwnMessage ? \"chat-message-wrapper own\" : \"chat-message-wrapper\"\n      }\n    >\n      <ChatDate messages={messages} i={i} />\n      <div\n        className={\n          isOwnMessage ? \"chat-message-text-PP own\" : \"chat-message-text-PP\"\n        }\n      >\n        {/* {!hasNeighborBelow && !isOwnMessage && (\n          <ProfilePicture\n            members={[messages[i].userInfos]}\n            size=\"small\"\n            absolute={true}\n          />\n        )} */}\n\n        <div\n          onMouseEnter={handleMouseHoveringMessage}\n          onMouseLeave={handleMouseLeaving}\n          ref={messageRef}\n          className={chatMessageClassName()}\n        >\n          {messages[i].content}\n\n          {isMouseHovering && (\n            <div\n              className={\n                isOwnMessage\n                  ? \"chat-message-date-small own\"\n                  : \"chat-message-date-small\"\n              }\n            >\n              {chatMessageDateFormat({ messages, i })}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatMessage;\n"]},"metadata":{},"sourceType":"module"}