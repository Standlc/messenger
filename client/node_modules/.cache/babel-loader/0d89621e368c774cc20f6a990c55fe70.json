{"ast":null,"code":"import { DateTime } from \"luxon\";\nexport const groupChatMessage = _ref => {\n  let {\n    messages,\n    i,\n    messageRef,\n    isOwnMessage\n  } = _ref;\n  const message = messages[i];\n  const messageDate = message.createdAt;\n  const messageAbove = messages[i + 1];\n  const messageBelow = messages[i - 1];\n  const messageRefCurrent = messageRef.current;\n  if (!messageRefCurrent) return;\n\n  const hasNeighborBelow = () => {\n    if (!messageBelow || messageBelow.userInfos._id !== message.userInfos._id) return false;\n    const messageBelowDate = messageBelow.createdAt;\n    if (time(messageDate, \"year\") < time(messageBelowDate, \"year\")) return;\n    if (time(messageDate, \"month\") < time(messageBelowDate, \"month\")) return;\n    if (time(messageDate, \"day\") < time(messageBelowDate, \"day\")) return;\n    return !(time(messageDate, \"hour\") < time(messageBelowDate, \"hour\"));\n  };\n\n  const hasNeighborAbove = () => {\n    if (!messageAbove || messageAbove.userInfos._id !== message.userInfos._id) return false;\n    const messageAboveDate = messageAbove.createdAt;\n    if (time(messageDate, \"year\") > time(messageAboveDate, \"year\")) return;\n    if (time(messageDate, \"month\") > time(messageAboveDate, \"month\")) return;\n    if (time(messageDate, \"day\") > time(messageAboveDate, \"day\")) return;\n    return !(time(messageDate, \"hour\") > time(messageAboveDate, \"hour\"));\n  };\n\n  const surroundedStyle = () => {\n    isOwnMessage ? (messageRefCurrent.style.borderTopLeftRadius = \"5px\", messageRefCurrent.style.borderBottomLeftRadius = \"5px\") : false;\n  };\n\n  const borderBottomStyle = () => {\n    return messageRefCurrent.style.borderBottomLeftRadius = \"5px\";\n  };\n\n  const borderTopStyle = () => {\n    return messageRefCurrent.style.borderTopLeftRadius = \"5px\";\n  };\n\n  const assigningStyles = () => {\n    if (hasNeighborAbove() && hasNeighborBelow()) surroundedStyle();\n    if (hasNeighborAbove() && !hasNeighborBelow()) borderTopStyle();\n    if (!hasNeighborAbove() && hasNeighborBelow()) borderBottomStyle();\n  };\n\n  assigningStyles();\n};\n\nconst time = (messageCreatedAt, dateType) => {\n  const Date = DateTime.fromISO(messageCreatedAt);\n  const timeTable = {\n    year: Date.toLocaleString({\n      year: \"2-digit\"\n    }),\n    month: Date.toLocaleString({\n      month: \"2-digit\"\n    }),\n    day: Date.toLocaleString({\n      day: \"2-digit\"\n    }),\n    hour: Date.toLocaleString({\n      hour: \"2-digit\",\n      hourCycle: \"h23\"\n    })\n  };\n  const isValidDateType = dateType === \"year\" || dateType === \"month\" || dateType === \"day\" || dateType === \"hour\";\n  return parseInt(timeTable[isValidDateType ? dateType : \"hour\"]);\n}; // console.log(\n//   message.userInfos.username,\n//   message.content,\n//   hasNeighborAbove(),\n//   hasNeighborBelow()\n// );\n// export const hasCloseNeighbor = ({\n//   order,\n//   messages,\n//   i,\n// }: {\n//   order: string;\n//   messages: Message[];\n//   i: number;\n// }) => {\n//   const neighborMessage = order === \"next\" ? messages[i - 1] : messages[i + 1];\n//   const isNeighborOwnMessage =\n//     neighborMessage?.userInfos._id === messages[i]?.userInfos._id;\n//   if (!neighborMessage || !isNeighborOwnMessage) return false;\n//   const neighborMessageDate = neighborMessage?.createdAt;\n//   const messageDate = messages[i].createdAt;\n//   const time = (messageCreatedAt: string, dateType: string) => {\n//     const table = {\n//       year: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         year: \"2-digit\",\n//       }),\n//       month: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         month: \"2-digit\",\n//       }),\n//       day: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         day: \"2-digit\",\n//       }),\n//       hour: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         hour: \"2-digit\",\n//         hourCycle: \"h23\",\n//       }),\n//     };\n//     const isValidDateType =\n//       dateType === \"year\" ||\n//       dateType === \"month\" ||\n//       dateType === \"day\" ||\n//       dateType === \"hour\";\n//     return parseInt(table[isValidDateType ? dateType : \"year\"]);\n//   };\n//   if (order === \"next\") {\n//     if (time(messageDate, \"year\") < time(neighborMessageDate, \"year\")) return;\n//     if (time(messageDate, \"month\") < time(neighborMessageDate, \"month\")) return;\n//     if (time(messageDate, \"day\") < time(neighborMessageDate, \"day\")) return;\n//     return !(time(messageDate, \"hour\") < time(neighborMessageDate, \"hour\"));\n//   } else {\n//     if (time(messageDate, \"year\") > time(neighborMessageDate, \"year\")) return;\n//     if (time(messageDate, \"month\") > time(neighborMessageDate, \"month\")) return;\n//     if (time(messageDate, \"day\") > time(neighborMessageDate, \"day\")) return;\n//     return !(time(messageDate, \"hour\") > time(neighborMessageDate, \"hour\"));\n//   }\n// };","map":{"version":3,"sources":["/Users/stan/Desktop/messenger/client/src/components/chat/messagesList/chatMessage/isMessageClose.tsx"],"names":["DateTime","groupChatMessage","messages","i","messageRef","isOwnMessage","message","messageDate","createdAt","messageAbove","messageBelow","messageRefCurrent","current","hasNeighborBelow","userInfos","_id","messageBelowDate","time","hasNeighborAbove","messageAboveDate","surroundedStyle","style","borderTopLeftRadius","borderBottomLeftRadius","borderBottomStyle","borderTopStyle","assigningStyles","messageCreatedAt","dateType","Date","fromISO","timeTable","year","toLocaleString","month","day","hour","hourCycle","isValidDateType","parseInt"],"mappings":"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","sourcesContent":["import { Message } from \"../../../../types\";\nimport { DateTime } from \"luxon\";\nimport { RefObject } from \"react\";\n\nexport const groupChatMessage = ({\n  messages,\n  i,\n  messageRef,\n  isOwnMessage,\n}: {\n  messages: Message[];\n  i: number;\n  messageRef: RefObject<HTMLDivElement>;\n  isOwnMessage: boolean;\n}) => {\n  const message = messages[i];\n  const messageDate = message.createdAt;\n  const messageAbove = messages[i + 1];\n  const messageBelow = messages[i - 1];\n  const messageRefCurrent = messageRef.current;\n  if (!messageRefCurrent) return;\n\n  const hasNeighborBelow = () => {\n    if (!messageBelow || messageBelow.userInfos._id !== message.userInfos._id)\n      return false;\n    const messageBelowDate = messageBelow.createdAt;\n    if (time(messageDate, \"year\") < time(messageBelowDate, \"year\")) return;\n    if (time(messageDate, \"month\") < time(messageBelowDate, \"month\")) return;\n    if (time(messageDate, \"day\") < time(messageBelowDate, \"day\")) return;\n    return !(time(messageDate, \"hour\") < time(messageBelowDate, \"hour\"));\n  };\n\n  const hasNeighborAbove = () => {\n    if (!messageAbove || messageAbove.userInfos._id !== message.userInfos._id)\n      return false;\n    const messageAboveDate = messageAbove.createdAt;\n    if (time(messageDate, \"year\") > time(messageAboveDate, \"year\")) return;\n    if (time(messageDate, \"month\") > time(messageAboveDate, \"month\")) return;\n    if (time(messageDate, \"day\") > time(messageAboveDate, \"day\")) return;\n    return !(time(messageDate, \"hour\") > time(messageAboveDate, \"hour\"));\n  };\n\n  const surroundedStyle = () => {\n    isOwnMessage\n      ? ((messageRefCurrent.style.borderTopLeftRadius = \"5px\"),\n        (messageRefCurrent.style.borderBottomLeftRadius = \"5px\"))\n      : false;\n  };\n  const borderBottomStyle = () => {\n    return (messageRefCurrent.style.borderBottomLeftRadius = \"5px\");\n  };\n  const borderTopStyle = () => {\n    return (messageRefCurrent.style.borderTopLeftRadius = \"5px\");\n  };\n\n  const assigningStyles = () => {\n    if (hasNeighborAbove() && hasNeighborBelow()) surroundedStyle();\n    if (hasNeighborAbove() && !hasNeighborBelow()) borderTopStyle();\n    if (!hasNeighborAbove() && hasNeighborBelow()) borderBottomStyle();\n  };\n  assigningStyles();\n};\n\nconst time = (messageCreatedAt: string, dateType: string) => {\n  const Date = DateTime.fromISO(messageCreatedAt);\n  const timeTable = {\n    year: Date.toLocaleString({\n      year: \"2-digit\",\n    }),\n    month: Date.toLocaleString({\n      month: \"2-digit\",\n    }),\n    day: Date.toLocaleString({\n      day: \"2-digit\",\n    }),\n    hour: Date.toLocaleString({\n      hour: \"2-digit\",\n      hourCycle: \"h23\",\n    }),\n  };\n  const isValidDateType =\n    dateType === \"year\" ||\n    dateType === \"month\" ||\n    dateType === \"day\" ||\n    dateType === \"hour\";\n\n  return parseInt(timeTable[isValidDateType ? dateType : \"hour\"]);\n};\n\n// console.log(\n//   message.userInfos.username,\n//   message.content,\n//   hasNeighborAbove(),\n//   hasNeighborBelow()\n// );\n// export const hasCloseNeighbor = ({\n//   order,\n//   messages,\n//   i,\n// }: {\n//   order: string;\n//   messages: Message[];\n//   i: number;\n// }) => {\n//   const neighborMessage = order === \"next\" ? messages[i - 1] : messages[i + 1];\n//   const isNeighborOwnMessage =\n//     neighborMessage?.userInfos._id === messages[i]?.userInfos._id;\n//   if (!neighborMessage || !isNeighborOwnMessage) return false;\n//   const neighborMessageDate = neighborMessage?.createdAt;\n//   const messageDate = messages[i].createdAt;\n\n//   const time = (messageCreatedAt: string, dateType: string) => {\n//     const table = {\n//       year: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         year: \"2-digit\",\n//       }),\n//       month: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         month: \"2-digit\",\n//       }),\n//       day: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         day: \"2-digit\",\n//       }),\n//       hour: DateTime.fromISO(messageCreatedAt).toLocaleString({\n//         hour: \"2-digit\",\n//         hourCycle: \"h23\",\n//       }),\n//     };\n//     const isValidDateType =\n//       dateType === \"year\" ||\n//       dateType === \"month\" ||\n//       dateType === \"day\" ||\n//       dateType === \"hour\";\n\n//     return parseInt(table[isValidDateType ? dateType : \"year\"]);\n//   };\n\n//   if (order === \"next\") {\n//     if (time(messageDate, \"year\") < time(neighborMessageDate, \"year\")) return;\n\n//     if (time(messageDate, \"month\") < time(neighborMessageDate, \"month\")) return;\n\n//     if (time(messageDate, \"day\") < time(neighborMessageDate, \"day\")) return;\n\n//     return !(time(messageDate, \"hour\") < time(neighborMessageDate, \"hour\"));\n//   } else {\n//     if (time(messageDate, \"year\") > time(neighborMessageDate, \"year\")) return;\n\n//     if (time(messageDate, \"month\") > time(neighborMessageDate, \"month\")) return;\n\n//     if (time(messageDate, \"day\") > time(neighborMessageDate, \"day\")) return;\n\n//     return !(time(messageDate, \"hour\") > time(neighborMessageDate, \"hour\"));\n//   }\n// };\n"]},"metadata":{},"sourceType":"module"}